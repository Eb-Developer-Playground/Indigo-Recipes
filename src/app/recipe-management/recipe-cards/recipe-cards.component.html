<app-header></app-header>


<!-- The Title Section -->


<section>
    <div class="filtercontainer">
        <div class="custom-dropdown" *ngFor="let dropdown of dropdowns; trackBy: trackByDropdown">
            <mat-label (click)="toggleDropdown(dropdown.id)">
                {{ dropdown.label }}<sup><mat-icon
                        [ngClass]="{'rotation': dropdown.isOpen}">arrow_drop_down</mat-icon></sup>
            </mat-label>
            <mat-checkbox *ngFor="let item of dropdown.items; trackBy: trackByItem"
                (change)="onSelectionChange(dropdown.id, item.value)">
                {{ item.label }}
            </mat-checkbox>
        </div>
    </div>
</section>

<section>
    <h5>
        New In
    </h5>

    
</section>

<!-- Search Filter Buttons -->
<div class="filterarea">
    <div class="filter-container">
        <div class="filter-item">
            <mat-label>Time</mat-label>
            
            <mat-select [(value)]="selectedTime" (selectionChange)="onTimeChange($event.value)">
                <mat-option *ngFor="let time of timeOptions" [value]="time.value">
                    <mat-checkbox></mat-checkbox>
                    {{ time.label }}
                </mat-option>
            </mat-select>

        </div>

        <div class="filter-item">
            <mat-label>Place</mat-label>
            <mat-select [(value)]="selectedPlace" (selectionChange)="onPlaceChange($event.value)">
                <mat-option *ngFor="let place of placeOptions" [value]="place.value">
                    <mat-checkbox></mat-checkbox>
                    {{ place.label }}
                </mat-option>
            </mat-select>

        </div>

        <div class="filter-item">
            <mat-label>Dietary</mat-label>
            <mat-select [(value)]="selectedDietary" (selectionChange)="onDietaryChange($event.value)">
                <mat-option *ngFor="let dietary of dietaryOptions" [value]="dietary.value">
                    <mat-checkbox></mat-checkbox>
                    {{ dietary.label }}
                </mat-option>
            </mat-select>

        </div>
    </div>
    <div>
        <span *ngIf="selectedTime" class="selected-filter">Time: {{ selectedTime }} <mat-icon
                (click)="removeFilter('time')">close</mat-icon></span>
        <span *ngIf="selectedPlace" class="selected-filter">Place: {{ selectedPlace }} <mat-icon
                (click)="removeFilter('place')">close</mat-icon></span>
        <span *ngFor="let filter of selectedDietaryFilters; trackBy: trackByFilter">
            <span *ngIf="filter">Dietary: {{ filter }} <mat-icon
                    (click)="removeFilter('dietary', filter)">close</mat-icon></span>
        </span>
    </div>
</div>



<!-- Test Ground -->










<!-- The recipe cards -->

<div>
    <div class="content-container">
        <div>
            <div class="card-width">
                <div class="card-row">
                    <mat-card class="custom-card" *ngFor="let card of cards" (mouseenter)="onMouseEnter(card.id)"
                        (mouseleave)="onMouseLeave(card.id)">
                        <div class="mat-card-header">
                            <div class="mat-card-title">
                                {{ card.recipeTitle }}
                            </div>
                        </div>
                        <div class="image-container">
                            <img [src]="card.imageUrl" alt="{{ card.name }}">
                        </div>
                        <div class="card-content">
                            {{ card.name }}
                        </div>
                        <div class="button-container">
                            <button mat-icon-button (click)="onComment(card.id)">
                                <mat-icon>comment</mat-icon>
                            </button>
                            <button mat-icon-button (click)="onLike(card.id)">
                                <mat-icon>favorite_border</mat-icon>
                            </button>
                            <button mat-icon-button (click)="onShare(card.id)">
                                <mat-icon>share</mat-icon>
                            </button>
                        </div>
                        <div class="rating-container" *ngIf="showRating">
                            <mat-icon class="star" *ngFor="let rating of [1, 2, 3, 4, 5]; let i = index"
                                [ngClass]="{ 'selected': card.rating === i + 1 }">
                                star
                            </mat-icon>
                        </div>

                    </mat-card>
                </div>
            </div>
        </div>
    </div>
</div>